/* Цветовая палитра и фон по умолчанию */
:root {
  --c1: #000000;
  --c2: #eeb46a;
  --c3: #186cbf;
  --c4: #4a2a16;
  --c5: #FFFFFF;
  --c6: #a75818;
  --c7: #384767;
  --c8: #000000;
  --c9: #7c5434;
  --bg-veiled: rgba(20, 18, 28, 0.35);
}

html, body { height: 100%; }
html { background: #1a1a1a; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 24px; }
/* Фон для всего сайта */
body:not(.bg-active) {
  background-image: url('../img/background.jpg');
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
}
body.bg-active {
  background-image: url('../img/background.jpg');
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
}
/* Ширина учитывает padding и border, чтобы min/max-width работали корректно */
*, *::before, *::after { box-sizing: border-box; }
/* Центрирование главного заголовка на всех страницах */
h1 { text-align: center; color: #fff; }
/* Логотип в заголовке */
#logo { width: 20%; height: auto; }
/* Ограничение ширины секций и центрирование по горизонтали */
.card { border: none; border-radius: 12px; padding: 16px; margin-bottom: 16px; width: 100%; max-width: 960px; min-width: 320px; margin-left: auto; margin-right: auto; background: #717171; color: #FFFFFF; }
.row { display: flex; gap: 8px; margin: 8px 0; flex-wrap: wrap; align-items: center; }
/* Подзаголовок игры в топбаре */
#game-subtitle { margin: 0; }
/* Уменьшаем отступы у текста подзаголовка */
#game-subtitle h3 { margin: 0; }
input, button, select { padding: 8px; font-size: 14px; }
.muted { color:#666; }
/* Внутри секций весь текст белый, включая элементы с классом muted и спец-баннер */
.card .muted { color: #FFFFFF; }
.card #winner-banner { color: #FFFFFF; }
/* Белый текст для полей и кнопок внутри секции */
.card input, .card select, .card button, .card label, .card a { color: #FFFFFF; }
/* Прозрачный фон и светлая рамка у элементов форм для читаемости на сером фоне */
.card input, .card select, .card textarea, .card button {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.6);
}
.card input:focus, .card select:focus, .card textarea:focus, .card button:focus {
  outline: none;
  border-color: #FFFFFF;
}
.card input::placeholder, .card textarea::placeholder {
  color: rgba(255, 255, 255, 0.85);
}
/* Стили для кнопок-ответов (переключателей) */
.vote-option[aria-checked="true"] {
  border: 2px solid #407AF6 !important;
  box-shadow: none;
}
.vote-option.muted { opacity: 0.7; }

/* Белая заливка, каждая кнопка в своей строке, чёрный контур у выбранного */
.vote-option {
  display: block;
  width: 100%;
  background: #FFFFFF !important;
  color: #000000 !important;
  border: 2px solid transparent !important;
  border-radius: 12px;
  padding: 8px 14px;
  text-align: left;
  margin: 4px 0;
}

/* Единые стили кнопок */
/* Цвет кода комнаты — чёрный для контраста */
#room-code-lobby, #room-code-2 { color: #000000; }

/* Стиль выпадающего списка как у полей ввода */
.card select {
  color: #000000;
  background: linear-gradient(#F4F4F4, #F4F4F4) padding-box,
              linear-gradient(90deg, #FFA412, #407AF6) border-box;
  border: 1px solid transparent;
  border-radius: 8px;
  box-shadow: 0 0 6px rgba(81, 102, 243, 0.25);
}
.card select:focus {
  outline: none;
  box-shadow: 0 0 8px rgba(81, 102, 243, 0.4);
}
/* Иконка внутри поля ввода никнейма */
.input-with-icon { position: relative; display: inline-block; }
.input-with-icon input { padding-right: 38px; }
.input-with-icon .icon-button {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  background: url('../img/arrownext.png') center/contain no-repeat;
  border: none;
  cursor: pointer;
}
/* Единый стиль полей ввода текста */
.card input,
.card textarea {
  color: #000000;
  background: linear-gradient(#F4F4F4, #F4F4F4) padding-box,
              linear-gradient(90deg, #FFA412, #407AF6) border-box;
  border: 1px solid transparent;
  border-radius: 8px;
  box-shadow: 0 0 6px rgba(81, 102, 243, 0.25);
}
.card input::placeholder,
.card textarea::placeholder {
  color: rgba(0, 0, 0, 0.6);
}
.card input:focus,
.card textarea:focus {
  outline: none;
  box-shadow: 0 0 8px rgba(81, 102, 243, 0.4);
}

button.btn-back, .btn-back {
  background-image: linear-gradient(90deg, #9EF9C4 0%, #71B9B9 100%);
  color: #FFFFFF;
  border: none;
  border-radius: 25px;
  padding: 8px 14px;
  cursor: pointer;
}
button.btn-action, .btn-action {
  background-image: linear-gradient(90deg, #11CCF6 0%, #7193B9 100%);
  color: #FFFFFF;
  border: none;
  border-radius: 25px;
  padding: 8px 14px;
  cursor: pointer;
}
button.btn-back:hover, button.btn-action:hover { filter: brightness(0.98); }
button.btn-back:disabled, button.btn-action:disabled { opacity: 0.65; cursor: default; pointer-events: none; }
.hidden { display:none; }
/* Приоритетное скрытие вкладок по классу hidden */
.phase-tabs .tab.hidden { display: none; }
code { background:#f6f8fa; padding:2px 6px; border-radius:6px; }
.wide { min-width: 320px; }
#players-list { padding-left: 20px; }
#players-list li { margin: 2px 0; }
/* На очень узких экранах разрешаем инпутам быть уже */
@media (max-width: 400px) { .wide { min-width: 240px; } }

/* Отступ и выравнивание заголовка в карточке выбора игр */
#games-title-row { justify-content: center; margin-top: 8px; }
#games-title { margin: 4px 0; }
/* Отступ слева для кнопки back на странице выбора игр, как у контейнера */
#games-back-row { max-width: 960px; min-width: 320px; margin-left: auto; margin-right: auto; }

/* Выравнивание заголовка "Ваш никнейм" как в карточке выбора игр */
#nick-title-row { justify-content: center; margin-top: 8px; }
#nick-title { margin: 2px 0; }
/* Центрируем элементы ввода никнейма */
#step-1 .row { justify-content: center; }

/* Выравнивание заголовка "Подключение" как в карточке выбора игр */
#connect-title-row { justify-content: center; margin-top: 8px; }
#connect-title { margin: 4px 0; }

/* Центровка элементов на шаге 2 */
#step-2 .row { justify-content: center; }
.input-group { display: inline-flex; align-items: center; gap: 8px; }

#players-list { padding-left: 20px; }
#players-list li { margin: 4px 0; }
.copied { background: #e6ffed; border-color: #b7eb8f; }
.copy-failed { background: #fff2f0; border-color: #ffccc7; }
/* Winner banner */
#winner-banner { font-size: 22px; font-weight: 700; color: #1d1d1f; }
#nick-saved { display: none; }
#auth-status { display: none; }

/* Game header with tabs */
.game-header {
  background: #f2f2f2;
  border-radius: 10px 10px 0 0;
  padding: 0;
  margin: -16px -16px 0 -16px;
}
.game-header-inner { display: flex; align-items: center; justify-content: center; padding: 12px 0; }
.game-header .game-title { margin: 12px 0; text-align: center; color: #333333; }
.game-header .game-title code#room-code-2 { background: #e0e0e0; color: #1d1d1f; padding: 2px 6px; border-radius: 6px; }
.phase-tabs { display: flex; gap: 0; margin: 0 -16px 0 -16px; width: auto; }
.phase-tabs { overflow: hidden; }
.phase-tabs .tab {
  background: #717171;
  color: #d9d9d9;
  border: 1px solid #717171;
  padding: 6px 10px;
  border-radius: 0 0 8px 8px;
  transform: translateY(0);
  flex: 1 1 0;
  text-align: center;
  white-space: nowrap;
  min-width: 0;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
}
.phase-tabs .tab:first-child { border-bottom-left-radius: 10px; }
.phase-tabs .tab.hidden + .tab { border-bottom-left-radius: 10px; }
.phase-tabs .tab:last-child { border-bottom-right-radius: 10px; }
.phase-tabs .tab.active {
  background: #f2f2f2;
  color: #1d1d1f;
  border-color: #f2f2f2;
  box-shadow: none;
}

/* Компактный режим вкладок: активная вкладка полноразмерная, остальные — иконки */
.phase-tabs.compact { align-items: stretch; }
.phase-tabs.compact .tab { flex: 0 0 42px; padding-left: 0; padding-right: 0; }
.phase-tabs.compact .tab.active { flex: 1 1 auto; padding-left: 10px; padding-right: 10px; font-size: inherit; }
.phase-tabs.compact .tab:not(.active) { font-size: 0; }
/* Иконки для вкладок по data-phase: всегда перед текстом */
.phase-tabs .tab::before {
  content: "";
  display: inline-block;
  width: 16px;
  height: 16px;
  margin-right: 6px;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: 16px 16px;
}
.phase-tabs.compact .tab:not(.active)::before { margin-right: 0; }
.phase-tabs.compact .tab:not(.active) .tab-timer { display: none !important; }
.phase-tabs .tab[data-phase="composing"]:not(.hidden)::before { background-image: url('../img/icon-composing.svg'); }
.phase-tabs .tab[data-phase="answering"]::before { background-image: url('../img/icon-answering.svg'); }
.phase-tabs .tab[data-phase="voting"]::before { background-image: url('../img/icon-voting.svg'); }
.phase-tabs .tab[data-phase="results"]::before { background-image: url('../img/icon-results.svg'); }
/* Фиксируем ширину счётчика таймера во вкладке, чтобы не дёргалась ширина */
.phase-tabs .tab .tab-timer { display: inline-block; width: 36px; text-align: right; }
/* Компактные отступы на странице Лобби */
#lobby-title-row { justify-content: center; margin-top: 8px; }
#lobby-title { margin: 4px 0; }
#step-3 h4 { margin: 0; }

/* Выравнивание заголовка "Игра" как у "Лобби" */
#game-title-row { justify-content: center; margin-top: 8px; }
#game-title { margin: 4px 0; }

/* Фиксированная ширина полей в лобби (не зависят от контейнера/флекса) */
#target-score, #question-seconds, #vote-seconds { width: 8ch; min-width: 8ch; flex: 0 0 auto; }

/* Динамическая сетка плиток игр */
#root, :root { --tile-min: 280px; }
.games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--tile-min, 280px), 1fr));
  gap: 12px;
}
.game-tile {
  display: flex;
  align-items: center;
  justify-content: center;
  --tile-height: 140px;
  height: var(--tile-height); /* фиксированная высота как раньше */
  /*border: 1px solid #ddd;*/
  border-radius: 12px;
  background: radial-gradient(circle at center, #11CCF6 0%, #e091d3 100%);
  background-size: 100% 100%;
  text-decoration: none;
  color: #000000;
  font-size: calc(var(--tile-height) * 0.2);
  font-weight: 600;
  user-select: none;
}
.game-tile:hover { filter: brightness(0.98); }

/* Топбар над шагами 2–4: кнопка слева/справа и название на противоположной стороне */
#topbar {
  max-width: 960px;
  min-width: 320px;
  margin-left: auto;
  margin-right: auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: nowrap;
}
/* На лобби меняем порядок: кнопка назад слева, текст справа */
#topbar.lobby #back-2-top { order: 1; }
#topbar.lobby #game-subtitle { order: 2; }

/* Небольшая вуаль для повышения контраста текста поверх пёстрого фона */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: transparent;
  z-index: 0;
}

/* Контент поверх канваса и вуали */
body > * { position: relative; z-index: 1; }
#bg-canvas { display: none !important; }

/* Сетка выравнивания подписей и полей ввода в лобби */
.settings-grid {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 3px 6px; /* row-gap, column-gap */
  align-items: center;
  max-width: 280px;
}
.settings-label { text-align: left; }
.settings-input { text-align: right; }

/* Скрывать пустой phase code, чтобы не было фона у пустого <code> */
#phase-code-2:empty { display: none; }
#phase-row { display: none; }
