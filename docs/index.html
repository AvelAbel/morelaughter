<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Best Answer — Demo (пошаговый)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <h1>MORELAUGHTER</h1>

  <!-- Верхний топбар: кнопка и название игры на одном уровне -->
  <div class="row" id="topbar">
    <div class="hidden" id="back-1-top">
      <button id="back-1" class="btn-back">← в меню игр</button>
    </div>
    <div class="hidden" id="game-subtitle">
      <h3 class="muted">Best Answer</h3>
    </div>
    <div class="hidden" id="back-2-top">
      <button id="back-2" class="btn-back">← Назад</button>
    </div>
  </div>

  <!-- Шаг 1. Никнейм -->
  <section class="card hidden" id="step-1">
    <div class="row" id="nick-title-row">
      <h3 id="nick-title">Ваш никнейм</h3>
    </div>
    <div class="row">
      <div class="input-with-icon">
        <input id="nick" placeholder="Никнейм" />
        <button id="nick-go" type="button" class="icon-button" aria-label="Продолжить"></button>
      </div>
      <span id="nick-saved" class="muted"></span>
      <span id="auth-status" class="muted"></span>
    </div>
  </section>

  <!-- Шаг 2. Подключение -->
  <section class="card hidden" id="step-2">
    <div class="row" id="connect-title-row">
      <h3 id="connect-title">Подключение</h3>
    </div>
    <div class="row">
      <div class="input-group">
        <input id="join-code" placeholder="Код" size="4" maxlength="4" />
        <button id="join-room" class="btn-action">Присоединиться</button>
      </div>
    </div>
    <div class="row">
      <span id="join-status" class="muted"></span>
    </div>
    <div class="row">
      <button id="create-room" class="btn-action">Создать комнату</button>
    </div>
  </section>

  
  <!-- Шаг 3. Лобби -->
  <section class="card hidden" id="step-3">
    <div class="row" id="lobby-title-row">
      <h3 id="lobby-title">Лобби</h3>
    </div>
    <div class="row">
      <h4>Код комнаты: <code id="room-code-lobby"></code> <button id="copy-code-lobby" class="btn-action">Скопировать</button></h4>
    </div>
    <div class="row hidden" id="lobby-wait-row">
      <div class="muted">Ждем, когда <strong id="host-nick-wait">хост</strong> начнет игру<span id="lobby-wait-dots"></span></div>
    </div>
      <div id="lobby-admin" class="hidden">
      <div class="row">
        <label>Источник вопросов:
          <select id="qsrc-select">
            <option value="preset" selected>Готовые вопросы</option>
            <option value="players">Вопросы от игроков</option>
          </select>
        </label>
      </div>
      <div class="settings-grid">
        <div class="settings-label">До скольки очков игра:</div>
        <div class="settings-input"><input id="target-score" type="number" min="1" max="99" placeholder="10" style="width:5ch"/></div>
        <div class="settings-label">Время на вопрос/ответ, сек:</div>
        <div class="settings-input" id="row-question-seconds"><input id="question-seconds" type="number" min="10" max="999" step="5" value="60" style="width:5ch"/></div>
        <div class="settings-label">Время на голосование, сек:</div>
        <div class="settings-input" id="row-vote-seconds"><input id="vote-seconds" type="number" min="5" max="999" step="5" value="45" style="width:5ch"/></div>
      </div>
      <div class="row">
        <button id="start-game" class="btn-action">Начать игру</button>
      </div>
    </div>
    <div class="row"><div class="muted">Игроки:</div></div>
    <ul id="players-list"></ul>
    
  </section>

<!-- Шаг 4. Раунд -->
  <section class="card hidden" id="step-4">
    <div class="row" id="game-title-row">
      <h3 id="game-title">Игра <code id="room-code-2"></code></h3>
    </div>
    <div class="row" id="phase-row">
      <strong>Фаза:</strong>
      <span id="phase-label"></span>
      <code id="phase-code-2" class="muted" style="margin-left:8px"></code>
    </div>
    <!-- Режим: Вопросы от игроков (фаза придумывания) -->
    <div class="row hidden" id="compose-row-message">
      <div><span id="compose-message"></span> <strong id="compose-timer"></strong></div>
    </div>
    <div class="row hidden" id="compose-row-input">
      <input id="custom-question" placeholder="Введите свой вопрос" class="wide" />
      <button id="submit-custom-question" class="btn-action">Отправить вопрос</button>
    </div>
    <!-- Фаза голосования: таймер -->
    <div class="row hidden" id="voting-row-message">
      <div>Голосование, осталось: <strong id="voting-timer"></strong></div>
    </div>
    <div class="row"><div><strong>Вопрос:</strong> <span id="question-text">—</span></div></div>
    <!-- Фаза ответов: таймер -->
    <div class="row hidden" id="answering-row-message">
      <div>Ответы, осталось: <strong id="answering-timer"></strong></div>
    </div>
    <div class="row">
      <input id="answer-text" placeholder="Ваш ответ" class="wide" />
      <button id="submit-answer" class="btn-action">Отправить ответ</button>
    </div>
    <div class="row">
      <div id="answers-list" class="wide hidden"></div>
    </div>
    <div class="row">
      <button id="vote" class="hidden btn-action" disabled>Выбрать лучший ответ</button>
    </div>
    <div class="row hidden" id="winner-banner"></div>
    <div class="row">
      <button id="next-round" class="hidden btn-action">Следующий раунд</button>
    </div>
    <div class="row">
      <button id="end-game" class="hidden btn-action">Завершить игру</button>
    </div>
    <!-- Список игроков в раунде с галочками отправивших -->
    <div class="row"><div class="muted">Игроки:</div></div>
    <ul id="players-list-round"></ul>
    <div id="room-state" class="muted"></div>
    <div id="round-state" class="muted"></div>
  </section>

  <script type="module" src="js/main.js"></script>
</body>
</html>
